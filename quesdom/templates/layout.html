<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Quisdom - {{title}}</title>
    <!-- To add Inter font from google fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@100;400&display=swap" rel="stylesheet">

    <link rel="stylesheet" href="./static/styles.css"/>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-0evHe/X+R7YkIZDRvuzKMRqM+OrBnVFBL6DOitfPri4tjfHxaWutUpFmBp4vmVor" crossorigin="anonymous">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-0evHe/X+R7YkIZDRvuzKMRqM+OrBnVFBL6DOitfPri4tjfHxaWutUpFmBp4vmVor" crossorigin="anonymous">
  </head>
  <body  style="font-family: Inter;" onload="adjustLoginBtn();">
    <nav class="mt-3 mx-2 navbar navbar-expand-lg">
      <div class="container-fluid">
        <a class="navbar-brand fw-bolder" href="{{url_for('home')}}"><span class="brand-text">Quesdom</span></a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarSupportedContent">
          <ul class="ms-auto navbar-nav me-auto mb-2 mb-lg-0">
            {%if current_user.is_authenticated %}
                      {%if current_user.role == 'Admin'%}
                      <li class="nav-item dropdown py-4 py-sm-0">
                        <a class="text-center nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                            Quizzes
                          </a>
                          <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
                              <li><a class="dropdown-item p-3 p-sm-2" href="{{url_for('indexquiz')}}">View Quizzes</a></li>
                              <li><a class="dropdown-item p-3 p-sm-2" href="{{url_for('createquiz')}}">Add Quiz</a></li>
                              <li><hr class="dropdown-divider"></li>
                              <li><a class="dropdown-item p-3 p-sm-2" href="#">Something</a></li>
                          </ul>
                      </li>
                      {%else%}
                        
                          <li class="nav-item ">
                            <a class="nav-link active text-center" aria-current="page" href="{{url_for('home')}}">Home</a>
                          </li>
                          <li class="nav-item dropdown py-4 py-sm-0 px-4">
                              <a class="text-center nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                                  Quizzes
                                </a>
                                <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
                                    <li><a class="dropdown-item p-3 p-sm-2" href="{{url_for('allquizzes')}}">All Quizzes</a></li>

                                    <li><a class="dropdown-item p-3 p-sm-2" href="{{url_for('myquizzes')}}">My Quizzes</a></li>
                                    <li><hr class="dropdown-divider"></li>
                                    <li><a class="dropdown-item p-3 p-sm-2" href="#">Something else here</a></li>
                                </ul>
                            </li>
                            <li class="nav-item">
                              <a class="nav-link text-center" href="{{url_for('about')}}">About</a>
                            </li>
                      
                      {%endif%}

          {%else%}
                    <li class="nav-item ">
                      <a class="nav-link active text-center" aria-current="page" href="{{url_for('home')}}">Home</a>
                    </li>
                    <li class="nav-item dropdown py-4 py-sm-0 px-4">
                        <a class="text-center nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                            Quizzes
                          </a>
                          <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
                              <li><a class="dropdown-item p-3 p-sm-2" href="{{url_for('allquizzes')}}">All Quizzes</a></li>
                              <li><hr class="dropdown-divider"></li>
                              <li><a class="dropdown-item p-3 p-sm-2" href="#">Something else here</a></li>
                          </ul>
                      </li>
                      <li class="nav-item">
                        <a class="nav-link text-center" href="{{url_for('about')}}">About</a>
                      </li>
          {%endif%}
          </ul>
            {% if current_user.is_authenticated %}
              <div class="login-btn d-flex justify-content-center">
                <a id="login-btn-inner" style=" border: 1px solid lightgrey;" class="fw-bold px-4 py-2  text-dark btn fs-5 rounded-1 me-2" type="button" href="{{url_for('account')}}">My Account</a>
                <a id="login-btn-inner" style=" border: 1px solid lightgrey;" class="fw-bold px-4 py-2 btn text-dark fs-5 rounded-1 me-2" type="button" href="{{url_for('logout')}}">Logout</a>
              </div>

            {% else %}
              <div class="login-btn d-flex justify-content-center">
                <a id="login-btn-inner" style="border: 1px solid lightgrey;" class="fw-bold px-4 py-2 btn text-dark fs-5 rounded-1 me-2" type="button" href="{{url_for('register')}}">Sign Up</a>
                <a id="login-btn-inner" style="border: 1px solid lightgrey; " class="fw-bold px-4 py-2 btn text-dark fs-5 rounded-1" type="button" href="{{url_for('login')}}">Login</a>
              </div>
            {%endif%}
      </div>
    </nav>
    
    <div class="container">
        {% with messages= get_flashed_messages(with_categories=true) %}
          {%if messages%}
            {% for category,message in messages%}
              <div class="alert d-flex justify-content-between alert-{{category}} mt-2">
                {{ message }}
                <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
              </div>
            {%endfor%}
          {%endif%}
        {%endwith%}
        {%block content%}{%endblock%}
    </div>
    <script>
      /*The login button's width was lesser than the width of brand name, due to this the menu list
      was pulled towards the right and was not properly centered. So, using javascript, I will adjust the 
      width of the login button such that it is equal to that of brandname. thus, the menu links will be aligned
      properly at the center*/
      /*I have just removed the classes and tweaks which were used to center the menu list, this is because it was
      leading to duplication of the login, signup, logout buttons and led to redundancy. Now the below code is almost useless*/
      function adjustLoginBtn(){
        var brand = document.getElementsByClassName('navbar-brand');
        var login = document.getElementsByClassName('login-btn');
        brand[0].style.width = window.getComputedStyle(brand[0]).width;//because there are two buttons, Login and Sign Up
        console.log("Login button adjusted");
      }
      
    </script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/js/bootstrap.bundle.min.js" integrity="sha384-pprn3073KE6tl6bjs2QrFaJGz5/SUsLqktiwsUTF55Jfv3qYSDhgCecCxMW52nD2" crossorigin="anonymous"></script>
  </body>
</html>
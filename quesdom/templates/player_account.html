{%extends "player_layout.html"%}
{%block content%}
<div class="content-section row gap-0 pt-md-5">
    <div class="col-12 p-2">
        {%if current_user.role == 'Player' %}
        <div class="card">
            <div class="card-header">
                Statistics
            </div>
            <div class="card-body">
                <div class="row justify-content-center">
                    <div class="col-4">
                            <div class="h2 text-center">Quizzes Played</div>
                            <div class="body d-flex justify-content-center align-items-center h1">
                                {{q_played}}
                            </div>
                        </div>
                    
                </div>
            </div>
        </div>

        {%endif%}
    </div>
    <div class="col-12 col-sm-6 col-md-6 p-2">
        <div class="card profile-card">
            <div class="card-header">
                Profile
            </div>
            <div class="card-body">
                <div class="p-3">
                    <span>Username</span> <span class="form-control d-inline">{{current_user.username}}</span>
                </div>
                <div class="p-3">
                    <span>E-mail</span> <span class="form-control d-inline">{{current_user.email}}</span>
                </div>
                <div class="p-3">
                    <span>Role</span> <span class="form-control d-inline">{{current_user.role}}</span>
                </div>
            </div>
        </div>
    </div>
    <div class="col-12 col-sm-6 col-md-6 p-2">
        <div class="card account-card">
            <div class="card-header">
                Account Settings
            </div>
            <div class="card-body">
                <div class="p-3">
                    <a class="btn btn-outline-danger w-100" href="{{url_for('player_updatepassword')}}">Change Password</a>
                </div>
                <div class="p-3">
                    <a class="btn btn-outline-danger w-100" href="{{url_for('player_deleteaccount')}}" data-bs-toggle="modal" data-bs-target="#deleteModal">Delete Account</a>
                </div>
                <!-- <div class="p-3">
                    <a class="btn btn-outline-secondary w-100" href="#">Reset Account</a>
                </div> -->
            </div>
        </div>
    </div>
  
</div>

<!--Delete Confirmation Modal -->
<div class="modal fade" id="deleteModal" tabindex="-1" aria-labelledby="deleteModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
        <div class="modal-header">
        <h5 class="modal-title" id="deleteModalLabel">Confirm Deletion</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
        Are you sure you want to delete your account? (Note that once you delete your account, it cannot be recovered.)
        </div>
        <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">No</button>
        <a href="#" class="btn btn-danger modal-yes-button">Yes</a>
        </div>
    </div>
    </div>
</div>
<script>
    /*The code below adds the correct hyperlink to the yes button in delete Quiz modal*/
    const exampleModal = document.getElementById('deleteModal')
    deleteModal.addEventListener('show.bs.modal', event => {
    // Button that triggered the modal
    const button = event.relatedTarget
    const delurl = button.getAttribute('href')
    // If necessary, you could initiate an AJAX request here
    // and then do the updating in a callback.
    //
    // Update the modal's content.
    const modalYesButton = deleteModal.querySelector('.modal-yes-button')
    
    modalYesButton.href = delurl
})
</script>
{% endblock %}